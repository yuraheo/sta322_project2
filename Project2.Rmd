---
title: "Project 2"
author: "Yura Heo, Kathleen Zhang"
format: pdf
editor: visual
---

# Model Justification and Diagnostics

For this experiment, we used a full factorial experimental design with four factors—rotor length, leg length, leg width, and paperclip use, each at two levels (2×2×2×2 = 16 total design combinations). To ensure adequate precision and allow estimation of variability at each condition, we collected four independent flight-time measurements per combination, resulting in 64 total experimental runs.

Because the project requires identifying (1) which factors matter most, (2) whether interaction effects exist, and (3) the best-performing combination, a full factorial model is the most appropriate analytical approach. This model estimates all main effects and interaction effects, allowing us to evaluate both individual factor contributions and how factors jointly influence performance.

The residuals appear randomly scattered around zeros across the entire range, and there is no clear curvature or funneling pattern, suggesting there is no evidence of missing nonlinear structure. Homoscedasticity holds reasonably well as the vertical spread of residuals is roughly constant across fitted values.\
The QQ plot shows that the normality assumption is largely satisfied as it follows the 45-degree line.

# Q1. Which factors are most important to make helicopters that fly longer?

Leg length appears to be the factor with the largest estimated effect on flight time. Compared to the baseline (12 cm legs), the shorter 7.5 cm legs increase predicted flight time by 0.240 seconds, with a 95% confidence interval of approximately (−0.09, 0.56). Leg width and paperclip use also have positive estimated effects—about +0.195 seconds for wider legs and +0.158 seconds for using a paperclip—but their confidence intervals also include zero. Because all factor-level confidence intervals span zero, we cannot conclude that any of these effects are statistically different from no effect.

# Q2. Is there any evidence that the effect of rotor length differs by leg width?

The analysis of our full factorial design shows that the `rotor:leg_width` interaction is not statistically significant (p = 0.43), meaning the interaction does not meaningfully improve the model. The point estimate for the `rotor:leg_width` interaction is -0.18 seconds, meaning that the difference in flight time between the 8.5 and 7.5 cm rotors is approximately 0.18 seconds shorter when the legs are 5 cm wide than when the legs are 3.2 cm wide. Because our 95% confidence interval is (-0.64, 0.28) and includes 0, there is insufficient statistical evidence to conclude that the effect of rotor length depends on leg width.

# Q3: What would you recommend as the ideal combination to make the helicopter fly long?

Even though statistical differences are not significant, we can still identify the best-performing conditions to find an optimal helicopter design by examining the predicted flight times from the full factorial. We estimated the model-based mean flight times from the `emmeans` output and identified the combination with the largest predicted mean flight time. The longest predicted mean flight time is about 2.44 seconds (with a 95% confidence interval of (2.21, 2.67)) for a helicopter with a rotor of 8.5 cm (longer rotor/high setting), leg length of 7.5 cm (shorter leg length/low setting), leg width of 5.0 cm (longer leg width/high setting), and no paper clip attached (low setting). Therefore, the ideal combination to make the helicopter fly long is a rotor of 8.5 cm, leg length of 7.5 cm, leg width of 5.0 cm, and no paper clip attached.

# **Appendix**

```{r}
library(tidyverse)
library(emmeans)

rotor_length <- c("7.5 cm", "8.5 cm")
leg_length   <- c("7.5 cm", "12.0 cm")
leg_width    <- c("3.2 cm", "5.0 cm")
paper_clip   <- c("No", "Yes")

base_design <- expand.grid(
  RotorLength = rotor_length,
  LegLength   = leg_length,
  LegWidth    = leg_width,
  PaperClip   = paper_clip
)

design <- base_design[rep(1:nrow(base_design), each = 4), ]

design$Replicate <- rep(1:4, times = nrow(base_design))

design$FlightTime_sec <- NA

#write.csv(design, "helicopter_design.csv", row.names = FALSE)

#design
```

```{r}

heli <- read_csv("helicopter_design.csv")

glimpse(heli)
heli <- heli %>%
  mutate(
    rotor    = factor(RotorLength),
    leg_len  = factor(LegLength),
    leg_width= factor(LegWidth),
    clip     = factor(PaperClip)
  )

fit_full <- lm(
  FlightTime_sec ~ rotor * leg_len * leg_width * clip,
  data = heli
)
summary(fit_full)
confint(fit_full)
```

```{r}

par(mfrow = c(1, 2)) 
plot(fit_full, which = 1)
plot(fit_full, which = 2)  

par(mfrow = c(1, 1))
```

```{r}

emm_all  <- emmeans(fit_full, ~ rotor * leg_len * leg_width * clip)
emm_tbl  <- summary(emm_all)   

best_row <- emm_tbl[which.max(emm_tbl$emmean), ]
best_row

```
